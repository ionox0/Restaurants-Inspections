View(signs)
d = as.Date('2015-01-01')
newSigns = c(signs$LATITUDE, signs$LONGITUDE, signs$INSPECTION_DATE)
newSigns$dateFormatted = as.Date(newSigns$INSPECTION_DATE)
newSigns$dateFormatted = lapply(as.Date(newSigns$INSPECTION_DATE))
newSigns = data.frame(signs$LATITUDE, signs$LONGITUDE, signs$INSPECTION_DATE)
newSigns$dateFormatted = as.Date(newSigns$INSPECTION_DATE)
View(newSigns)
newSigns$dateFormatted = as.Date(newSigns$INSPECTION_DATE, "%Y/%m/%d")
View(newSigns)
View(newSigns)
newSigns$dateFormatted = as.Date(newSigns$signs.INSPECTION_DATE, "%Y/%m/%d")
subset(newSigns, dateFormatted <= d & dateFormatted >= d-30)
d
View(newSigns)
newSigns$dateFormatted = as.Date(newSigns$signs.INSPECTION_DATE, "%y/%m/%d")
View(newSigns)
newSigns$dateFormatted = as.Date(newSigns$signs.INSPECTION_DATE, "%m/%d/%Y")
newSigns$dateFormatted = as.Date(newSigns$signs.INSPECTION_DATE, "%m/%d/%y")
subset(newSigns, dateFormatted <= d & dateFormatted >= d-30)
subset(newSigns, dateFormatted <= d & dateFormatted >= d-30)
df = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30)
geom_point(newSigns = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = LATITUDE, y = LONGITUDE),
alpha = 0.5)
ggplot() + geom_point(newSigns = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = LATITUDE, y = LONGITUDE),
alpha = 0.5)
ggplot() + geom_point(subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = LATITUDE, y = LONGITUDE),
alpha = 0.5)
map = ggplot() + geom_point(subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = LATITUDE, y = LONGITUDE),
alpha = 0.5)
map = ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = LATITUDE, y = LONGITUDE),
alpha = 0.5)
map
ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5) + c
map = getMap('new york city')
library(ggmap)
map = getMap('new york city')
map = getmap('new york city')
map = get_map('new york city')
zoom = get_map(maptype='roadmap')
map = get_map('new york city', maptype='hybrid')
map  = map + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map = get_map('new york city', maptype='hybrid')
ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5) + map
ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
ggplot() + geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5) + map
map = get_map('new york city', maptype='hybrid')
map <- ggmap(zoom, base_layer = ggplot(aes(x = longitude, y = latitude),
data = data3))
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map = get_map('new york city', maptype='hybrid')
map <- ggmap(zoom, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns))
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map = get_map('new york city', maptype='hybrid')
map <- ggmap(zoom, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(zoom, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5)
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LATITUDE, y = signs.LONGITUDE),
alpha = 0.5, color='blue')
map
View(newSigns)
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue')
map
map = get_map('newyork', maptype='hybrid', zoom=13)
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue')
map
map = get_map('newyork', maptype='hybrid', zoom=10)
map
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue')
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(67, 97), ylim=c(5, 35))
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue')
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.25, -73.70), ylim=c(40.5, 40.91))
map
map = get_map('newyork', maptype='hybrid')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.25, -73.70), ylim=c(40.5, 41.05))
map
map
map = get_map('newyork', maptype='roadmap')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.25, -73.70), ylim=c(40.5, 41.05))
map
map = get_map('newyork', maptype='roadmap')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.05, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='roadmap')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2012-01-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "/ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 600, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
map = get_map('newyork', maptype='roadmap')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map = get_map('newyork', maptype='roadmap')
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2012-01-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "/ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 600, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
pwd
dir
dir()
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2012-01-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 600, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
map = get_map('newyork', maptype='roadmap')
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2015-12-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 600, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
data = read.csv("restaurants_fixed.csv", header = TRUE)
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
idata = read.csv('data5.csv', header=TRUE)
View(idata)
map = get_map('newyork', maptype='toner', GRAYSCALE=TRUE)
map = get_map('newyork', maptype='toner', grayscale=TRUE)
View(newSigns)c
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95)) +
geom_point(data = subset(idata, dateFormatted < d & dateFormatted > d - 30) +
aes(x = XCoord, y = YCood, color='red'))
idata$dateFormatted = as.Date(idata$RECORD.DATE, "%m/%d/%Y")
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95)) +
geom_point(data = subset(idata, dateFormatted < d & dateFormatted > d - 30) +
aes(x = XCoord, y = YCood, color='red'))
d
d = as.Date('2015-01-01')
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95)) +
geom_point(data = subset(idata, dateFormatted < d & dateFormatted > d - 30) +
aes(x = XCoord, y = YCood, color='red'))
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCood),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
idata$dateFormatted = as.Date(idata$INSPECTION.DATE, "%m/%d/%Y")
map = get_map('newyork', maptype='toner')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='terrain', color='color')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='terrain', color='color', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map = get_map('newyork', maptype='terrain', color='color', source='stamen')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='watercolor', color='bw', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', color='bw', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', color='black', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map = get_map('newyork', color='black', source='google')
map = get_map('newyork', maptype='toner', color='bw', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='watercolor', color='color', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
map = get_map('newyork', maptype='terrain', source='google')
map = get_map('newyork', maptype='terrain', source='google')
map <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE, size = 1),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord,  size = 5),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
map
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2015-12-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(
data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE, size = 1),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord, size = 3),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 680, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
map = get_map('newyork', maptype='terrain', source='google')
###########
saveHTML({
ani.options(interval = 0.3)
for (d in as.Date("2015-12-01"):as.Date("2016-01-01")) {
map_2 <- ggmap(map, base_layer = ggplot(
aes(x = signs.LONGITUDE, y = signs.LATITUDE),
data = newSigns)) +
geom_point(
data = subset(newSigns, dateFormatted <= d & dateFormatted >= d-30),
aes(x = signs.LONGITUDE, y = signs.LATITUDE, size = 1),
alpha = 0.5, color='blue') +
geom_point(data = subset(idata, dateFormatted <= d & dateFormatted >= d-30),
aes(x = XCoord, y = YCoord, size = 3),
alpha = 0.5, color='red') +
coord_cartesian(xlim = c(-74.10, -73.70), ylim=c(40.5, 40.95))
print(map_2)
}
}, img.name = "rats", imgdir = "ian",
htmlfile = "rats.html",
outdir = getwd(), autobrowse = FALSE, ani.height = 680, ani.width = 800,
verbose = FALSE, autoplay = TRUE,
title = "Rats sightings mapped over time")
View(idata)
raw = read.csv('original_data.csv')
View(raw)
ratsRaw = subset(raw, VIOLATION.CODE == '04K')
range(ratsRaw$RECORD.DATE)
range(ratsRaw$dateFormatted)
View(ratsRaw)
ratsRaw$dateFormatted = as.Date(ratsRaw$signs.INSPECTION_DATE, "%m/%d/%y")
View(ratsRaw)
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION_DATE, "%m/%d/%y")
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION.DATE, "%m/%d/%y")
range(ratsRaw$dateFormatted)
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION.DATE, "%m/%d/%Y")
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION.DATE, "%m/%d/%Y")
range(ratsRaw$dateFormatted)
range(idata$dateFormatted)
idata = subset(idata, dateFormatted > '2015-02-06')
idataLatest = subset(idata, dateFormatted > '2012-02-06')
idata = read.csv('data5.csv', header=TRUE)
idata$dateFormatted = as.Date(idata$INSPECTION.DATE, "%m/%d/%Y")
idataLatest = subset(idata, dateFormatted > '2012-02-06')
ratsRaw = subset(raw, VIOLATION.CODE == '04K')
raw = read.csv('original_data.csv')
ratsRaw = subset(raw, VIOLATION.CODE == '04K')
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION.DATE, "%m/%d/%Y")
raw = read.csv('original_data.csv')
raw = read.csv('Rats_Rest_LL.csv')
raw = read.csv('Rats_Rest_LL.csv', header=TRUE, charset='latin1')
raw = read.csv('Rats_Rest_LL.csv', header=TRUE, fileEncoding = ='latin1')
raw = read.csv('Rats_Rest_LL.csv', header=TRUE, fileEncoding = 'latin1')
ratsRaw = subset(raw, VIOLATION.CODE == '04K')
ratsRaw$dateFormatted = as.Date(ratsRaw$INSPECTION.DATE, "%m/%d/%Y")
idataLatest = subset(idata, dateFormatted > '2012-02-06')
idataLatest = subset(idata, dateFormatted > '2012-02-06')
